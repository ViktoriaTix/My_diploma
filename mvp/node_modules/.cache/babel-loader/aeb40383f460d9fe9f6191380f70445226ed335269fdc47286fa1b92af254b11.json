{"ast":null,"code":"const renderChart = data => {\n  const canvas = canvasRef.current;\n  const ctx = canvas.getContext(\"2d\");\n  if (data.length === 0) return;\n  const maxWidth = 1000;\n  const canvasWidth = Math.min(data.length * barWidth, maxWidth);\n  canvas.width = canvasWidth;\n  canvas.height = chartHeight + 100;\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  const colors = {\n    1: \"#B39DDB\",\n    // Сиреневый для активных действий\n    2: \"#FFD54F\",\n    // Желтый для спокойствия\n    3: \"#64B5F6\",\n    // Синий для туалета\n    0: \"#FF8A65\" // Розовый для еды\n  };\n  data.forEach((event, index) => {\n    const x = index * (barWidth + 10); // Увеличиваем расстояние между барами\n    const color = colors[event.event_type_id] || \"#F7A8B8\";\n\n    // Градиент для баров\n    const gradient = ctx.createLinearGradient(x, 0, x + barWidth, chartHeight);\n    gradient.addColorStop(0, color);\n    gradient.addColorStop(1, \"#ffffff\");\n\n    // Закругленные бары\n    ctx.fillStyle = gradient;\n    ctx.beginPath();\n    ctx.moveTo(x, chartHeight);\n    ctx.lineTo(x, 10);\n    ctx.arcTo(x, 0, x + barWidth, 0, 5); // Радиус скругления 5px\n    ctx.arcTo(x + barWidth, 0, x + barWidth, chartHeight, 5);\n    ctx.lineTo(x + barWidth, chartHeight);\n    ctx.closePath();\n    ctx.fill();\n\n    // Отрисовка границ баров\n    ctx.strokeStyle = \"#333\";\n    ctx.lineWidth = 1;\n    ctx.stroke();\n\n    // Время под графиком\n    if (index % 5 === 0) {\n      ctx.fillStyle = \"#555\";\n      ctx.font = \"12px Arial\";\n      ctx.textAlign = \"center\";\n      const time = new Date(event.created_at).toLocaleTimeString();\n      ctx.fillText(time, x + barWidth / 2, chartHeight + 30);\n    }\n  });\n\n  // Отметка осей\n  ctx.strokeStyle = \"#333\";\n  ctx.lineWidth = 1;\n  ctx.beginPath();\n  ctx.moveTo(0, chartHeight);\n  ctx.lineTo(canvas.width, chartHeight);\n  ctx.stroke();\n\n  // Легенда\n  const legend = [{\n    color: \"#B39DDB\",\n    text: \"Активные действия\"\n  }, {\n    color: \"#FFD54F\",\n    text: \"Спокойствие\"\n  }, {\n    color: \"#64B5F6\",\n    text: \"Туалет\"\n  }, {\n    color: \"#FF8A65\",\n    text: \"Еда\"\n  }];\n  legend.forEach((item, index) => {\n    const x = 20;\n    const y = chartHeight + 50 + index * 20;\n    ctx.fillStyle = item.color;\n    ctx.fillRect(x, y, 15, 15);\n    ctx.fillStyle = \"#333\";\n    ctx.font = \"12px Arial\";\n    ctx.textAlign = \"left\";\n    ctx.fillText(item.text, x + 20, y + 12);\n  });\n};","map":{"version":3,"names":["renderChart","data","canvas","canvasRef","current","ctx","getContext","length","maxWidth","canvasWidth","Math","min","barWidth","width","height","chartHeight","clearRect","colors","forEach","event","index","x","color","event_type_id","gradient","createLinearGradient","addColorStop","fillStyle","beginPath","moveTo","lineTo","arcTo","closePath","fill","strokeStyle","lineWidth","stroke","font","textAlign","time","Date","created_at","toLocaleTimeString","fillText","legend","text","item","y","fillRect"],"sources":["C:/Users/User/OTD/mvp/src/components/Graf.js"],"sourcesContent":["const renderChart = (data) => {\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    if (data.length === 0) return;\r\n\r\n    const maxWidth = 1000;\r\n    const canvasWidth = Math.min(data.length * barWidth, maxWidth);\r\n    canvas.width = canvasWidth;\r\n    canvas.height = chartHeight + 100;\r\n\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    const colors = {\r\n        1: \"#B39DDB\", // Сиреневый для активных действий\r\n        2: \"#FFD54F\", // Желтый для спокойствия\r\n        3: \"#64B5F6\", // Синий для туалета\r\n        0: \"#FF8A65\", // Розовый для еды\r\n    };\r\n\r\n    data.forEach((event, index) => {\r\n        const x = index * (barWidth + 10); // Увеличиваем расстояние между барами\r\n        const color = colors[event.event_type_id] || \"#F7A8B8\";\r\n\r\n        // Градиент для баров\r\n        const gradient = ctx.createLinearGradient(x, 0, x + barWidth, chartHeight);\r\n        gradient.addColorStop(0, color);\r\n        gradient.addColorStop(1, \"#ffffff\");\r\n\r\n        // Закругленные бары\r\n        ctx.fillStyle = gradient;\r\n        ctx.beginPath();\r\n        ctx.moveTo(x, chartHeight);\r\n        ctx.lineTo(x, 10);\r\n        ctx.arcTo(x, 0, x + barWidth, 0, 5); // Радиус скругления 5px\r\n        ctx.arcTo(x + barWidth, 0, x + barWidth, chartHeight, 5);\r\n        ctx.lineTo(x + barWidth, chartHeight);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n\r\n        // Отрисовка границ баров\r\n        ctx.strokeStyle = \"#333\";\r\n        ctx.lineWidth = 1;\r\n        ctx.stroke();\r\n\r\n        // Время под графиком\r\n        if (index % 5 === 0) {\r\n            ctx.fillStyle = \"#555\";\r\n            ctx.font = \"12px Arial\";\r\n            ctx.textAlign = \"center\";\r\n            const time = new Date(event.created_at).toLocaleTimeString();\r\n            ctx.fillText(time, x + barWidth / 2, chartHeight + 30);\r\n        }\r\n    });\r\n\r\n    // Отметка осей\r\n    ctx.strokeStyle = \"#333\";\r\n    ctx.lineWidth = 1;\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, chartHeight);\r\n    ctx.lineTo(canvas.width, chartHeight);\r\n    ctx.stroke();\r\n\r\n    // Легенда\r\n    const legend = [\r\n        { color: \"#B39DDB\", text: \"Активные действия\" },\r\n        { color: \"#FFD54F\", text: \"Спокойствие\" },\r\n        { color: \"#64B5F6\", text: \"Туалет\" },\r\n        { color: \"#FF8A65\", text: \"Еда\" },\r\n    ];\r\n\r\n    legend.forEach((item, index) => {\r\n        const x = 20;\r\n        const y = chartHeight + 50 + index * 20;\r\n\r\n        ctx.fillStyle = item.color;\r\n        ctx.fillRect(x, y, 15, 15);\r\n\r\n        ctx.fillStyle = \"#333\";\r\n        ctx.font = \"12px Arial\";\r\n        ctx.textAlign = \"left\";\r\n        ctx.fillText(item.text, x + 20, y + 12);\r\n    });\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}